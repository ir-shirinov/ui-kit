"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_classnames=_interopRequireDefault(require("classnames")),_rcCheckbox=_interopRequireDefault(require("rc-checkbox")),React=_interopRequireWildcard(require("react")),_configProvider=require("../config-provider"),_context=require("../form/context"),_warning=_interopRequireDefault(require("../_util/warning")),_Group=require("./Group"),_DisabledContext=_interopRequireDefault(require("../config-provider/DisabledContext")),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},InternalCheckbox=function InternalCheckbox(_a,ref){var _classNames,customizePrefixCls=_a.prefixCls,className=_a.className,children=_a.children,_a$indeterminate=_a.indeterminate,indeterminate=void 0!==_a$indeterminate&&_a$indeterminate,style=_a.style,onMouseEnter=_a.onMouseEnter,onMouseLeave=_a.onMouseLeave,_a$skipGroup=_a.skipGroup,skipGroup=void 0!==_a$skipGroup&&_a$skipGroup,disabled=_a.disabled,restProps=__rest(_a,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),_React$useContext=React.useContext(_configProvider.ConfigContext),getPrefixCls=_React$useContext.getPrefixCls,direction=_React$useContext.direction,checkboxGroup=React.useContext(_Group.GroupContext),isFormItemInput=(0,React.useContext)(_context.FormItemInputContext).isFormItemInput,contextDisabled=(0,React.useContext)(_DisabledContext.default),mergedDisabled=disabled||(null==checkboxGroup?void 0:checkboxGroup.disabled)||contextDisabled,prevValue=React.useRef(restProps.value);React.useEffect((function(){null==checkboxGroup||checkboxGroup.registerValue(restProps.value),"production"!==process.env.NODE_ENV&&(0,_warning.default)("checked"in restProps||!!checkboxGroup||!("value"in restProps),"Checkbox","`value` is not a valid prop, do you mean `checked`?")}),[]),React.useEffect((function(){if(!skipGroup)return restProps.value!==prevValue.current&&(null==checkboxGroup||checkboxGroup.cancelValue(prevValue.current),null==checkboxGroup||checkboxGroup.registerValue(restProps.value),prevValue.current=restProps.value),function(){return null==checkboxGroup?void 0:checkboxGroup.cancelValue(restProps.value)}}),[restProps.value]);var prefixCls=getPrefixCls("checkbox",customizePrefixCls),checkboxProps=(0,_extends2.default)({},restProps);checkboxGroup&&!skipGroup&&(checkboxProps.onChange=function(){restProps.onChange&&restProps.onChange.apply(restProps,arguments),checkboxGroup.toggleOption&&checkboxGroup.toggleOption({label:children,value:restProps.value})},checkboxProps.name=checkboxGroup.name,checkboxProps.checked=-1!==checkboxGroup.value.indexOf(restProps.value));var classString=(0,_classnames.default)((_classNames={},(0,_defineProperty2.default)(_classNames,"".concat(prefixCls,"-wrapper"),!0),(0,_defineProperty2.default)(_classNames,"".concat(prefixCls,"-rtl"),"rtl"===direction),(0,_defineProperty2.default)(_classNames,"".concat(prefixCls,"-wrapper-checked"),checkboxProps.checked),(0,_defineProperty2.default)(_classNames,"".concat(prefixCls,"-wrapper-disabled"),mergedDisabled),(0,_defineProperty2.default)(_classNames,"".concat(prefixCls,"-wrapper-in-form-item"),isFormItemInput),_classNames),className),checkboxClass=(0,_classnames.default)((0,_defineProperty2.default)({},"".concat(prefixCls,"-indeterminate"),indeterminate)),ariaChecked=indeterminate?"mixed":void 0;return React.createElement("label",{className:classString,style,onMouseEnter,onMouseLeave},React.createElement(_rcCheckbox.default,(0,_extends2.default)({"aria-checked":ariaChecked},checkboxProps,{prefixCls,className:checkboxClass,disabled:mergedDisabled,ref})),void 0!==children&&React.createElement("span",null,children))},Checkbox=React.forwardRef(InternalCheckbox);"production"!==process.env.NODE_ENV&&(Checkbox.displayName="Checkbox");var _default=Checkbox;exports.default=_default;