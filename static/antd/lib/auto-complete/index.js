"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_classnames=_interopRequireDefault(require("classnames")),_toArray=_interopRequireDefault(require("rc-util/lib/Children/toArray")),_omit=_interopRequireDefault(require("rc-util/lib/omit")),React=_interopRequireWildcard(require("react")),_configProvider=require("../config-provider"),_select=_interopRequireDefault(require("../select")),_reactNode=require("../_util/reactNode"),_warning=_interopRequireDefault(require("../_util/warning")),Option=_select.default.Option;function isSelectOptionOrSelectOptGroup(child){return child&&child.type&&(child.type.isSelectOption||child.type.isSelectOptGroup)}var AutoComplete=function AutoComplete(props,ref){var customizeInput,customizePrefixCls=props.prefixCls,className=props.className,popupClassName=props.popupClassName,dropdownClassName=props.dropdownClassName,children=props.children,dataSource=props.dataSource,childNodes=(0,_toArray.default)(children);if(1===childNodes.length&&(0,_reactNode.isValidElement)(childNodes[0])&&!isSelectOptionOrSelectOptGroup(childNodes[0])){var _childNodes=(0,_slicedToArray2.default)(childNodes,1);customizeInput=_childNodes[0]}var optionChildren,getInputElement=customizeInput?function(){return customizeInput}:void 0;return optionChildren=childNodes.length&&isSelectOptionOrSelectOptGroup(childNodes[0])?children:dataSource?dataSource.map((function(item){if((0,_reactNode.isValidElement)(item))return item;switch((0,_typeof2.default)(item)){case"string":return React.createElement(Option,{key:item,value:item},item);case"object":var optionValue=item.value;return React.createElement(Option,{key:optionValue,value:optionValue},item.text);default:return void("production"!==process.env.NODE_ENV&&(0,_warning.default)(!1,"AutoComplete","`dataSource` is only supports type `string[] | Object[]`."))}})):[],"production"!==process.env.NODE_ENV&&(0,_warning.default)(!("dataSource"in props),"AutoComplete","`dataSource` is deprecated, please use `options` instead."),"production"!==process.env.NODE_ENV&&(0,_warning.default)(!dropdownClassName,"AutoComplete","`dropdownClassName` is deprecated which will be removed in next major version. Please use `popupClassName` instead."),"production"!==process.env.NODE_ENV&&(0,_warning.default)(!customizeInput||!("size"in props),"AutoComplete","You need to control style self instead of setting `size` when using customize input."),React.createElement(_configProvider.ConfigConsumer,null,(function(_ref){var prefixCls=(0,_ref.getPrefixCls)("select",customizePrefixCls);return React.createElement(_select.default,(0,_extends2.default)({ref},(0,_omit.default)(props,["dataSource"]),{prefixCls,dropdownClassName:popupClassName||dropdownClassName,className:(0,_classnames.default)("".concat(prefixCls,"-auto-complete"),className),mode:_select.default.SECRET_COMBOBOX_MODE_DO_NOT_USE},{getInputElement}),optionChildren)}))},RefAutoComplete=React.forwardRef(AutoComplete);RefAutoComplete.Option=Option;var _default=RefAutoComplete;exports.default=_default;